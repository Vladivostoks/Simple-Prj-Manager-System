webpackJsonp([1],{0:function(e,t){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4Vh3":function(e,t){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},5:function(e,t){},6:function(e,t){},"6ZSt":function(e,t){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},7:function(e,t){},"7fUA":function(e,t){},8:function(e,t){},"8YCc":function(e,t){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},9:function(e,t){},AvQP:function(e,t){},CwE2:function(e,t){},KYqO:function(e,t){e.exports={_args:[["elliptic@6.5.4","/Users/shuzhengyang/Desktop/project/item/13_wagtail/vue_demo/Simple-Prj-Manager-System/front-vue"]],_development:!0,_from:"elliptic@6.5.4",_id:"elliptic@6.5.4",_inBundle:!1,_integrity:"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.5.4",name:"elliptic",escapedName:"elliptic",rawSpec:"6.5.4",saveSpec:null,fetchSpec:"6.5.4"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",_spec:"6.5.4",_where:"/Users/shuzhengyang/Desktop/project/item/13_wagtail/vue_demo/Simple-Prj-Manager-System/front-vue",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},description:"EC cryptography",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.4"}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},r,!1,function(e){a("Vngv")},null,null).exports,o=a("/ocq"),s=a("//Fk"),c=a.n(s),l=a("mtWM"),d=a.n(l),f=a("woOf"),u=a.n(f),p=a("rSpy"),m=a.n(p),b={name:"user_edit",data:function(){var e=this;return{form:{username:"",passwd:"",newPasswd:"",confirm:"",user_type:""},rules:{username:[{required:!0,message:"需要填写用户名",trigger:"blur"}],passwd:[{min:1,required:!0,message:"需要填写密码",trigger:"blur"}],newPasswd:[{required:!0,validator:function(t,a,n){return a?e.form.passwd==a&&n(new Error("新密码不能和旧密码一致")):n(new Error("需要输入新密码")),n(),!0},trigger:"blur"}],user_type:[{required:!0,message:"需要选择用户类型",trigger:"blur"}],confirm:[{required:!0,validator:function(t,a,n){return a?e.form.newPasswd!=a&&n(new Error("两次输入密码不一致")):n(new Error("需要确认输入密码")),n(),!0},trigger:"blur"}]}}},props:{dialogFormVisible:{type:Boolean,required:!0},headLable:{type:String,default:"添加用户",validator:function(e){return-1!==["添加用户","修改密码","创建超级用户"].indexOf(e)}},value:{type:Object,default:null,validator:function(e){return!0}}},components:{},computed:{},watch:{},methods:{handleClose:function(e){"创建超级用户"!=this.headLable&&this.$emit("dialog-close").then(function(){e()}).catch(function(){})},Cancel:function(){"创建超级用户"!=this.headLable&&this.$emit("dialog-close")},Confirm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a=new Object;a.username=e.form.username,a.passwd=m.a.SHA256(e.form.newPasswd).toString(),a.prop=e.value.user_type,d()({url:"/user",method:"put",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:a}).then(function(t){t.data.ret||e.$message({type:"error",message:"创建用户失败"}),e.$emit("dialog-submit",e.form)}).catch(function(t){e.$message({type:"error",message:t}),e.$emit("dialog-submit",e.form)})})}},created:function(){},mounted:function(){null!=this.value&&(this.form=u()({},this.value))},updated:function(){},destroyed:function(){}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.headLable,"show-close":!1,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1,width:"30vw"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":"100px",prop:"username"}},[a("el-input",{attrs:{disabled:"修改密码"==e.headLable,placeholder:"请设置用户名",autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),"修改密码"==e.headLable&&e.form.curPasswd?a("el-form-item",{attrs:{label:"输入当前密码","label-width":"100px",prop:"passwd"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入当前密码",autocomplete:"off"},model:{value:e.form.curPasswd,callback:function(t){e.$set(e.form,"curPasswd",t)},expression:"form.curPasswd"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"输入新密码","label-width":"100px",prop:"newPasswd"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请设置一个密码",autocomplete:"off"},model:{value:e.form.newPasswd,callback:function(t){e.$set(e.form,"newPasswd",t)},expression:"form.newPasswd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":"100px",prop:"confirm"}},[a("el-input",{attrs:{"show-password":"",placeholder:"再次输入设置密码",autocomplete:"off"},model:{value:e.form.confirm,callback:function(t){e.$set(e.form,"confirm",t)},expression:"form.confirm"}})],1),e._v(" "),"添加用户"==e.headLable?a("el-form-item",{attrs:{prop:"user_type",label:"添加用户类型","label-width":"100px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择关联人员类型"},model:{value:e.form.user_type,callback:function(t){e.$set(e.form,"user_type",t)},expression:"form.user_type"}},[a("el-option",{attrs:{label:"管理员",value:"controller"}}),e._v(" "),a("el-option",{attrs:{label:"普通用户",value:"normalizer"}})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["创建超级用户"!=e.headLable?a("el-button",{on:{click:e.Cancel}},[e._v("取 消")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.Confirm()}}},[e._v("提 交")])],1)],1)},staticRenderFns:[]};function g(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+r}function v(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function _(e){g(e,"",-1)}function w(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())}var y={name:"Login",data:function(){return{user_create:!1,edit_label:"修改密码",user_prop:"normalizer",username:null,passwd:"",invalid:!0}},props:{},components:{"user-edit":a("VU/8")(b,h,!1,function(e){a("zQKd")},"data-v-0c755f60",null).exports},computed:{},watch:{username:function(e,t){this.invalid=!e}},methods:{cancelUserEdit:function(){this.user_create=!1},getResult:function(e){this.username=e.username,this.passwd=e.newPasswd,this.user_create=!1,this.$refs.name.focus()},login:function(){var e=new Object,t=this;e.username=this.username,e.passwd=m.a.SHA256(this.passwd).toString(),new c.a(function(a,n){d()({url:"/login",method:"put",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e}).then(function(e){e.data.ret?"登陆成功"==e.data.message?a(e.data.user_prop):"无初始化"==e.data.message&&(t.edit_label="修改密码",t.user_prop=e.data.user_prop,t.user_create=!0):n(new Error(e.data.message))}).catch(function(e){n(e)})}).then(function(e){return e}).then(function(e){g("username",t.username,1),g("userprop",e,1),t.$router.push({name:"mainPage",params:{user_prop:e}})}).catch(function(e){t.$message({type:"error",message:e.message}),console.dir(e)})}},created:function(){_("username")},mounted:function(){var e=this;d()({url:"/user",method:"get",timeout:5e3,responseType:"json",responseEncoding:"utf8",params:{ischeck_super:!0}}).then(function(t){t.data.hasSuperUser?e.$refs.name.focus():(e.edit_label="创建超级用户",e.user_prop="administrators",e.user_create=!0)}).catch(function(t){e.$message({type:"error",message:t}),console.dir(t)})},updated:function(){},destroyed:function(){}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("img",{attrs:{src:"static/image/logo.png",width:"300px",height:"300px"}}),e._v(" "),a("div",[a("el-row",[e._v("用户:\n                    "),a("el-input",{ref:"name",attrs:{placeholder:"用户名","prefix-icon":"el-icon-s-check",autocomplete:"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("el-row",[e._v("密码:\n                    "),a("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"el-icon-key","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.passwd,callback:function(t){e.passwd=t},expression:"passwd"}})],1),e._v(" "),a("el-row",{staticStyle:{margin:"50px 0"}},[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary",round:"",disabled:e.invalid},on:{click:e.login}},[e._v("进入\n            ")])],1)],1),e._v(" "),e.user_create?a("user-edit",{attrs:{dialogFormVisible:e.user_create,headLable:e.edit_label,value:{username:e.username,user_type:e.user_prop}},on:{"dialog-close":e.cancelUserEdit,"dialog-submit":e.getResult}}):e._e()],1)],1)},staticRenderFns:[]};var k=a("VU/8")(y,x,!1,function(e){a("nTnq")},"data-v-47daf0d8",null).exports,S={name:"mainPage",data:function(){return{username:v("username"),user_prop:v("userprop"),iconName:"el-icon-user-solid",plain:!0,round:!1,global:!1,curPage:"shortItem"}},props:{},components:{},computed:{},watch:{},methods:{leave:function(){this.iconName="el-icon-user-solid"},enter:function(){this.iconName="el-icon-circle-close"},logout:function(){_("username"),_("userprop"),this.$router.push({path:"/"})}},created:function(){},mounted:function(){this.username?this.$router.replace({path:"/mainPage/shortItem"}):this.logout()},updated:function(){},destroyed:function(){}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{attrs:{height:"8vh"}},[a("el-col",{staticClass:"guide",attrs:{span:20}},[a("el-menu",{attrs:{"default-active":e.curPage,mode:"horizontal",router:!0,"background-color":"#E9EEF3","text-color":"#545c64","active-text-color":"#0b71df"},model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}},[a("el-menu-item",{attrs:{index:"shortItem"}},[a("div",{staticClass:"el-icon-edit-outline"},[e._v(" 事 务 ")])]),e._v(" "),"administrators"==e.user_prop?a("el-menu-item",{attrs:{index:"contrlBroad"}},[a("div",{staticClass:"el-icon-setting"},[e._v(" 系 统 ")])]):e._e()],1)],1),e._v(" "),a("el-col",{staticClass:"exit",attrs:{span:4}},[a("el-button",{attrs:{type:"danger",icon:e.iconName,plain:""},on:{click:e.logout},nativeOn:{mouseenter:function(t){return e.enter(t)},mouseleave:function(t){return e.leave(t)}}},[e._v("\n                "+e._s(e.username)+"\n            ")])],1)],1),e._v(" "),a("el-main",[a("router-view")],1),e._v(" "),a("el-footer",{attrs:{height:"5vh"}},[e._v("Report System V0.0.2 Copyright ©2021 Ayden.Shu. All Rights Reserved.")])],1)},staticRenderFns:[]};var T=a("VU/8")(S,C,!1,function(e){a("fPRk")},"data-v-74e30e44",null).exports,D=a("Xxa5"),A=a.n(D),E=a("exGp"),j=a.n(E),O=a("c/Tr"),$=a.n(O),R=a("lHA8"),F=a.n(R),P=a("pFYg"),z=a.n(P),M=a("uXZL"),U=a.n(M),B=a("UUzX"),V=a.n(B),I=a("o/zv"),W=a.n(I),L=a("t4zo"),q={name:"item_edit",data:function(){return{dialogFormVisible:!1,itemTypeList:["需求新增","问题反馈","TVD","RV_TVD","HEOP"],personList:[],form:{relate_persons:[],duty_persons:[]},rules:{create_date:[{required:!0,message:"必须需要创建时间",trigger:"change"}],prjname:[{required:!0,message:"需要填写项目名称",trigger:"blur"}],brief:[{required:!0,message:"需要填写原始需求/问题反馈",trigger:"blur"}],region:[{required:!0,message:"需要填写项目归属区域",trigger:"blur"}],period:[{required:!0,type:"integer",min:1,max:100,message:"计划完成时间至少需要大于1",trigger:"blur"}],percent:[{required:!0,type:"integer",min:0,max:100,message:"进度应该在0-100之间",trigger:"blur"}],status:[{validator:function(e,t,a){return-1!==["已完成","执行中","已暂停","已终止"].indexOf(t)||a(new Error("状态仅限于'已完成','执行中','已暂停', '已终止'中的一种"))},trigger:"blur"}],prjtype:[{required:!0,type:"array",min:1,message:"需要选择项目类型",trigger:"blur"}],duty_persons:[{required:!0,type:"array",min:1,message:"需要填写处理人员",trigger:"blur"}]}}},props:{editIndex:{type:Number,default:-1},value:{type:Object,validator:function(e){return!0}}},components:{},computed:{},watch:{},methods:{statusChange:function(){},percentChange:function(e){this.form.status=100==e?"已完成":"执行中"},handleClose:function(e){this.dialogFormVisible=!1,this.$emit("dialog-close")},Cancel:function(){this.dialogFormVisible=!1,this.$emit("dialog-close")},Confirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.dialogFormVisible=!1,t.$emit("dialog-submit",t.form,t.form.uuid)})}},created:function(){},mounted:function(){this.form=u()({},this.value),this.dialogFormVisible=!0},updated:function(){},destroyed:function(){}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.editIndex>=0?"编辑项目":"新建项目",visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"创建日期","label-width":"120px",prop:"create_date"}},[a("el-date-picker",{attrs:{type:"date",disabled:!0,format:"yyyy 年 MM 月 dd 日","value-format":"timestamp",placeholder:"选择日期"},model:{value:e.form.create_date,callback:function(t){e.$set(e.form,"create_date",t)},expression:"form.create_date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称","label-width":"120px",prop:"prjname"}},[a("el-input",{attrs:{placeholder:"输入项目名称",autocomplete:"off"},model:{value:e.form.prjname,callback:function(t){e.$set(e.form,"prjname",t)},expression:"form.prjname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域","label-width":"120px",prop:"region"}},[a("el-input",{attrs:{placeholder:"输入项目归属区域",autocomplete:"off"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品型号","label-width":"120px",prop:"prjmodel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择产品型号"},model:{value:e.form.prjmodel,callback:function(t){e.$set(e.form,"prjmodel",t)},expression:"form.prjmodel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目类型","label-width":"120px",prop:"prjtype"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择项目类型"},model:{value:e.form.prjtype,callback:function(t){e.$set(e.form,"prjtype",t)},expression:"form.prjtype"}},e._l(e.itemTypeList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原始需求","label-width":"120px",prop:"brief"}},[a("el-input",{attrs:{type:"textarea",placeholder:"项目具体需求/问题反馈说明",autocomplete:"off"},model:{value:e.form.brief,callback:function(t){e.$set(e.form,"brief",t)},expression:"form.brief"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"svn/git","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"项目关联代码路径",autocomplete:"off"},model:{value:e.form.svnurl,callback:function(t){e.$set(e.form,"svnurl",t)},expression:"form.svnurl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预计执行时间(周)","label-width":"120px"}},[a("el-input-number",{attrs:{min:1,disabled:e.editIndex>=0,label:"输入项目计划完成所需周数"},model:{value:e.form.period,callback:function(t){e.$set(e.form,"period",t)},expression:"form.period"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行进度/状态","label-width":"120px"}},[a("el-col",{attrs:{span:24}},[a("el-select",{attrs:{placeholder:"选择状态"},on:{change:e.statusChange},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"已完成",value:"已完成"}}),e._v(" "),a("el-option",{attrs:{label:"执行中",value:"执行中"}}),e._v(" "),a("el-option",{attrs:{label:"暂停中",value:"暂停中"}}),e._v(" "),a("el-option",{attrs:{label:"已终止",value:"已终止"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"当前处理人员","label-width":"120px",prop:"duty_persons"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择处理人员"},model:{value:e.form.duty_persons,callback:function(t){e.$set(e.form,"duty_persons",t)},expression:"form.duty_persons"}},e._l(e.personList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"关联人员","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入关联人员"},model:{value:e.form.relate_persons,callback:function(t){e.$set(e.form,"relate_persons",t)},expression:"form.relate_persons"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.Cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.Confirm("form")}}},[e._v("提 交")])],1)],1)},staticRenderFns:[]};var N=a("VU/8")(q,H,!1,function(e){a("7fUA")},"data-v-971f7ae4",null).exports,K={name:"time_line",data:function(){return{form:{contentStaus:"",doneContent:"",resultContent:"",percent:0},addStatus:!1,activities_:[],rules:{doneContent:[{required:!0,message:"请填写实施内容",trigger:"blur"},{min:4,message:"长度需要大于4个字符",trigger:"blur"}],resultContent:[{required:!0,message:"请填写实施结果",trigger:"blur"},{min:4,message:"长度需要大于4个字符",trigger:"blur"}],percent:[{min:0,max:100,type:"integer",trigger:"blur"}]}}},props:{project_uuid:{type:String,required:!0},project_status:{type:String,default:"success"},isEditable:{type:Boolean,default:!0}},computed:{},watch:{addStatus:function(e,t){e&&this.activities_.length>0&&(this.form.percent=this.activities_[0].percent)}},methods:{getLineContent:function(e,t){var a=new Object;return a.start_time=t[0].getTime(),a.end_time=t[1].getTime(),new c.a(function(t,n){d()({url:"/affair/"+e,method:"get",timeout:5e3,responseType:"json",responseEncoding:"utf8",params:a}).then(function(e){e.data.length>0||self.isEditable,t(e.data)}).catch(function(e){n(e)})})},line2Text:function(e,t){var a="";for(var n in e)e[n].timestamp>=t[0].getTime()&&e[n].timestamp<t[1].getTime()&&(a+=new Date(e[n].timestamp).toISOString()+"("+e[n].author+"):\n",(a+=e[n].progress_content).endsWith("\n")||(a+="\n"),a+=e[n].progress_result,n!=e.length-1&&(a.endsWith("\n")||(a+="\n")));return a},closeEdit:function(){this.addStatus=!this.addStatus,this.form.contentStaus="",this.form.doneContent="",this.form.resultContent=""},openEdit:function(e){var t=this;this.addStatus?this.$refs[e].validate(function(e){if(!e)return!1;var a={},n=t;a.timestamp=(new Date).getTime(),a.progress_content=t.form.doneContent,a.progress_result=t.form.resultContent,a.percent=t.form.percent,a.project_status="error"==t.project_status?"danger":t.project_status,a.author=v("username"),d()({url:"/affair/"+n.project_uuid,method:"post",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:a}).then(function(e){"插入成功"==e.data.message&&(a.timestamp=new Date(a.timestamp).toString(),a.index_num=e.data.index_num,n.activities_.unshift(a),n.closeEdit(),n.$message({type:"success",message:"添加时间线成功!"}),t.$emit("timeline-submit",n.project_uuid,a.percent))}).catch(function(e){console.dir(e)})}):this.closeEdit()},handleDelete:function(e){var t=this;this.$confirm("此操作将删除此条时间线记录,是否执行?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=new Object,n=t;a.index=t.activities_[e].index_num,d()({url:"/affair/"+n.project_uuid,method:"delete",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:a}).then(function(a){"删除成功"==a.data.message&&(n.activities_.splice(e,1),n.$message({type:"success",message:"删除成功!"}),t.$emit("timeline-submit",n.project_uuid,n.activities_.length>0?n.activities_[0].percent:0))}).catch(function(e){console.dir(e)})}).catch(function(){})}},created:function(){var e=this,t=[new Date(1970,1,1),new Date];this.getLineContent(this.project_uuid,t).then(function(t){for(var a in e.activities_=t,e.activities_)e.activities_[a].timestamp=new Date(e.activities_[a].timestamp).toString()}).catch(function(t){for(var a in e.$message({type:"error",message:t}),e.activities_=[{timestamp:(new Date).toString(),author:v("username"),percent:0,project_status:"danger",progress_content:"获取项目执行记录失败",progress_result:"获取暂无项目结果记录失败"}],e.activities_)e.activities_[a].timestamp=new Date(e.activities_[a].timestamp).toString()})},mounted:function(){},updated:function(){},destroyed:function(){}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-timeline",[e.isEditable?a("el-timeline-item",{attrs:{type:"info",placement:"top",icon:"el-icon-plus",timestamp:(new Date).toString()}},[e.addStatus?a("el-form",{ref:"contentform",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"实施内容",prop:"doneContent"}},[a("el-input",{staticStyle:{width:"20vw"},attrs:{type:"textarea",size:"medium",autosize:{minRows:1,maxRows:3},placeholder:"输入项目进度记录实施内容"},model:{value:e.form.doneContent,callback:function(t){e.$set(e.form,"doneContent",t)},expression:"form.doneContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施结果",prop:"resultContent"}},[a("el-input",{staticStyle:{width:"20vw"},attrs:{type:"textarea",size:"medium",autosize:{minRows:1,maxRows:3},placeholder:"输入项目进度记录实施结果"},model:{value:e.form.resultContent,callback:function(t){e.$set(e.form,"resultContent",t)},expression:"form.resultContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实施进度",prop:"percent"}},[a("el-slider",{staticStyle:{width:"20vw"},model:{value:e.form.percent,callback:function(t){e.$set(e.form,"percent",t)},expression:"form.percent"}})],1)],1):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:e.addStatus?"success":"primary",icon:e.addStatus?"el-icon-check":"el-icon-edit"},on:{click:function(t){return e.openEdit("contentform")}}},[e._v(e._s(e.addStatus?"":"新增时间线记录"))]),e._v(" "),e.addStatus?a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:e.closeEdit}}):e._e()],1):e._e(),e._v(" "),e._l(e.activities_,function(t,n){return a("el-timeline-item",{key:n,attrs:{type:t.project_status,placement:"top",timestamp:t.timestamp+" Author: "+t.author+" "+t.percent+"%"}},[a("el-card",{staticStyle:{width:"30vw",margin:"20px 0"},attrs:{shadow:"hover"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticStyle:{float:"left",width:"10%"}},[e._v("[进展]:")]),e._v(" "),a("pre",{staticStyle:{float:"left",width:"90%",margin:"0 0"}},[e._v(e._s(t.progress_content))])]),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticStyle:{float:"left",width:"10%"}},[e._v("[结果]:")]),e._v(" "),a("pre",{staticStyle:{float:"left",width:"90%",margin:"0 0"}},[e._v(e._s(t.progress_result))])])],1),e._v(" "),e.isEditable&&n>0?a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(n)}}}):e._e()],1)})],2)},staticRenderFns:[]};var Q=a("VU/8")(K,Y,!1,function(e){a("CwE2")},"data-v-057f67c3",null).exports,G={name:"process_line",data:function(){return{}},props:{percent:{type:Number,default:10,validator:function(e){return e<=100&&e>=0}},status:{type:String,default:"已终止",validator:function(e){return-1!==["已完成","执行中","暂停中","已终止"].indexOf(e)}}},computed:{color:function(){switch(this.status){case"已完成":return"#67C23A";case"执行中":return"#409EFF";case"暂停中":return"#E6A23C";case"已终止":return"#F56C6C"}}},watch:{},methods:{progress_content:function(e){return e+"%"+this.status}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){}},Z={render:function(){var e=this.$createElement;return(this._self._c||e)("el-progress",{attrs:{type:"line",percentage:this.percent,color:this.color,format:this.progress_content}})},staticRenderFns:[]},X=a("VU/8")(G,Z,!1,null,null,null).exports,J={name:"exportOptionForm",data:function(){return{formVisible:!0,isContent:!0,isIndeterminate:!1,form:{checkAll:!0,checkedOption:[],isWeekRange:!0,contentTimeRange:[new Date(0),new Date]},rules:{checkedOption:[{required:!0,validator:function(e,t,a){return t.length<=0&&a(new Error("至少需要选择一项")),a(),!0},trigger:"blur"}]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"至今所有",onClick:function(e){var t=new Date,a=new Date;a.setTime(0),e.$emit("pick",[a,t])}}]}}},props:{headLable:{type:String,required:!0},exportOption:{type:Object,default:null,validator:function(e){return!0}},exportAction:{type:Function,required:!0}},components:{},computed:{},watch:{},methods:{handleCheckAllChange:function(e){if(e){for(var t in this.exportOption)this.form.checkedOption.push(this.exportOption[t].name);this.isContent=!0}else this.form.checkedOption=[];this.isIndeterminate=!1},exportOptChange:function(e){var t=e.length,a=0;for(var n in this.exportOption)a++;this.checkAll=t===a,this.isIndeterminate=t>0&&t<a,this.form.checkedOption.indexOf("具体内容")>-1?this.isContent=!0:this.isContent=!1},handleClose:function(e){this.formVisible=!1,this.$emit("dialog-close").then(function(){e()}).catch(function(){})},Cancel:function(){this.formVisible=!1,this.$emit("dialog-close")},Confirm:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.formVisible=!1;var a=e.exportOption,n=[new Date(1970,0,0),new Date];for(var r in a)if(e.form.checkedOption.indexOf(a[r].name)>-1){if(e.form.checkedOption.indexOf("具体内容")>-1&&"具体内容"==a[r].name){var i=a[r].wpx,o=a[r].alignment;if(n[0]=a[r].dateRange[0].getTime()>e.form.contentTimeRange[0].getTime()?a[r].dateRange[0]:e.form.contentTimeRange[0],e.form.isWeekRange){var s=e.form.contentTimeRange[1].getDay(),c=e.form.contentTimeRange[1].getDate(),l=e.form.contentTimeRange[1].getMonth(),d=e.form.contentTimeRange[1].getFullYear();n[1]=new Date(d,l,c-s+5)}else n[1]=e.form.contentTimeRange[1];for(var f=n[1];f.getTime()>=n[0].getTime();){var u=f.getDate(),p=f.getMonth(),m=f.getFullYear(),b=void 0,h=void 0;a[b=e.form.isWeekRange?w(new Date(m,p,u)):w(f)]=new Object,a[b].name=b,a[b].wpx=i,a[b].alignment=o,h=e.form.isWeekRange?new Date(m,p,u-7):new Date(m,p,u-1),a[b].dateRange=[h,f],f=h}delete a[r]}}else delete a[r];e.exportAction(a,n),e.$emit("dialog-submit")})}},created:function(){},mounted:function(){if(null!=this.exportOption)for(var e in this.exportOption)this.form.checkedOption.push(this.exportOption[e].name);this.formVisible=!0},updated:function(){},destroyed:function(){}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.headLable,"show-close":!1,visible:e.formVisible,"before-close":e.handleClose,"close-on-click-modal":!1,width:"30vw"},on:{"update:visible":function(t){e.formVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"导出选项","label-width":"100px",prop:"checkedOption"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.form.checkAll,callback:function(t){e.$set(e.form,"checkAll",t)},expression:"form.checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.exportOptChange},model:{value:e.form.checkedOption,callback:function(t){e.$set(e.form,"checkedOption",t)},expression:"form.checkedOption"}},e._l(e.exportOption,function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.name}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),e.isContent?a("el-form-item",{attrs:{label:"按照周导出","label-width":"100px",prop:"isWeekRange"}},[a("el-switch",{model:{value:e.form.isWeekRange,callback:function(t){e.$set(e.form,"isWeekRange",t)},expression:"form.isWeekRange"}})],1):e._e(),e._v(" "),e.isContent?a("el-form-item",{attrs:{label:"导出内容区间","label-width":"100px",prop:"contentTimeRange"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.form.contentTimeRange,callback:function(t){e.$set(e.form,"contentTimeRange",t)},expression:"form.contentTimeRange"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.Cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("导出")])],1)],1)},staticRenderFns:[]};var te=a("VU/8")(J,ee,!1,function(e){a("whA0")},"data-v-49a0b02e",null).exports,ae=a("M4fF"),ne=a.n(ae),re=["hidden","wpx","width","wch","MDW"],ie=["fill","font","alignment","border"];function oe(e){for(var t=e.toLowerCase().split(""),a=t.length,n=0,r=0;r<a;r++)n+=(t[r].charCodeAt()-96)*Math.pow(26,a-r-1);return n}function se(e,t,a,n,r){for(var i=ne.a.keys(t),o=ne.a.mapValues(t,function(e){return ne.a.isPlainObject(e)?e.name:e}),s=U.a.utils.json_to_sheet([o],{header:i,skipHeader:!0}),c=0;c<e.length;c++)e[c]=ne.a.pick(e[c],i);if(U.a.utils.sheet_add_json(s,e,{header:i,skipHeader:!0,origin:"A2"}),["xlsx","xlsm","xlsb"].includes(a)){for(var l in s)if("1"===l.replace(/[^0-9]/gi,""))s[l].s=n;else{var d=oe(l.replace(/[^A-Za-z]+$/gi,""))-1;if(i[d]&&ne.a.isPlainObject(t[i[d]])){var f=ne.a.pick(t[i[d]],ie);s[l].s=ne.a.assign(s[l].s,f)}}var u=[];if(ne.a.mapValues(t,function(e){u.push(ne.a.pick(e,re))}),s["!cols"]=u,r)for(var p in r)s.hasOwnProperty(p)&&(s[p].s=r[p])}return s}function ce(e){if("undefined"!=typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!==e.length;++n)a[n]=255&e.charCodeAt(n);return t}for(var r=new Array(e.length),i=0;i!==e.length;++i)r[i]=255&e.charCodeAt(i);return r}function le(e){var t=new Object;return console.dir(new Date(e[0])),console.dir(new Date(e[1])),t.start_time=e[0],t.end_time=e[1],t}function de(e,t){if("string"==typeof e)return-1!=e.search(t);if("object"!=(void 0===e?"undefined":z()(e))&&"array"!=typeof e)return!1;for(var a in e)if(de(e[a],t))return!0}function fe(e,t){var a=((new Date).getTime()-new Date(t).getTime())/6048e5;return(a=a<1?1:Math.ceil(a))+"周/"+e+"周"}function ue(e,t){var a=void 0,n=void 0,r=new F.a,i=[];for(a in e)if("[object Array]"==Object.prototype.toString.call(e))for(n in e[a][t])r.add(e[a][t][n]);else null!=e[a][t]&&r.add(e[a][t]);var o=$()(r);for(a in o){var s={text:o[a],value:o[a]};i.push(s)}return i}var pe={name:"tempItemPage",data:function(){return{loading:!1,weekRange:new Date,week_switch:!0,isUpdateTime:!0,notifyPromise:c.a.resolve(),tableKey:Math.random(),editIndex:!1,editDefault:{},open_dialog:!1,search:"",table_status:"create",total_data:[],show_data:[{uuid:"2e0e322a-503a-47fd-b28b-3a1202b55502",create_date:(new Date).getTime(),prjmodel:[],prjname:"xx区域xx项目",brief:"客户反馈xx问题/客户新增xx需求",region:"西安",period:20,percent:80,status:"执行中",relate_persons:["Ayden.Shu"],duty_persons:["Ayden.Shu","shuzhengyang"]}],open_export_dialog:!1,exportLabel:"",exportAction:function(){},exportOption:[]}},props:{},components:{"self-timeline":Q,"self-processline":X,"item-edit":N,"export-option":te},computed:{statusOpt:function(){return ue(this.show_data,"status")},typeOpt:function(){return ue(this.show_data,"prjtype")},regionOpt:function(){return ue(this.show_data,"region")},modelOpt:function(){return ue(this.show_data,"prjmodel")},personOpt:function(){return ue(this.show_data,"duty_persons")},relationOpt:function(){return ue(this.show_data,"relate_persons")}},watch:{},methods:{date2str:w,headercellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return{height:"20px",background:"#303133"}},cellStyle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex,new Date),n=a.getDay(),r=a.getDate(),i=a.getMonth(),o=a.getFullYear();if(a=new Date(o,i,r-n+1),t.lastupdate_date<a.getTime()||0==t.percent)return{background:"#C6E2FF"}},filterWithKeyWords:function(e){if(console.dir("search:"+e),this.loading=!0,""!==e){var t=[];for(var a in this.total_data)de(this.total_data[a],e)&&t.push(this.total_data[a]);this.show_data=t,console.dir(this.show_data)}else this.show_data=this.total_data,console.dir(this.show_data);this.tableKey=Math.random(),this.loading=!1},tableFilter:function(e,t,a){return t[a.property].includes(e)},notify:function(e){var t=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){t.$notify(e)})},getSchemeType:function(e,t){var a=((new Date).getTime()-new Date(t.create_date).getTime())/6048e5;return(a=Math.ceil(a))>t.period?"error":a>=t.period?"warning":"success"},getSchemeStr:function(e,t){return fe(t.period,t.create_date)},rangeTypeChange:function(){if(this.isUpdateTime){var e=new Date(this.weekRange),t=e.getDay(),a=e.getDate(),n=e.getMonth(),r=e.getFullYear();this.weekRange=new Array,this.weekRange[0]=new Date(r,n,a-t+1),this.weekRange[1]=new Date(r,n,a+(8-t))}else this.weekRange=this.weekRange[0];this.isUpdateTime=!this.isUpdateTime},timeRangeChange:function(){var e=new Array,t=this;if(this.isUpdateTime){var a=new Date(this.weekRange),n=a.getDay(),r=a.getDate(),i=a.getMonth(),o=a.getFullYear();e[0]=new Date(o,i,r-n+1),e[1]=new Date(o,i,r+(8-n))}else e=this.weekRange;for(var s in e)e[s]=e[s].getTime();this.loading=!0,this.affairGet(le(e),this.table_status,this.isUpdateTime).then(function(e){t.loading=!1,t.total_data=e,t.show_data=t.total_data})},timelineSubmit:function(e,t){for(var a=this,n=0;n<this.show_data.length;n++)if(this.show_data[n].uuid==e){this.show_data[n].percent=t,this.affairPut(this.show_data[n]).then(function(){a.tableKey=Math.random()});break}},selectItemWithStatus:function(e,t){var a=this;this.table_status=e;var n=new Array(2),r=this;if("create"===e){var i=new Date,o=i.getDay(),s=i.getDate(),c=i.getMonth(),l=i.getFullYear();n[0]=new Date(l,c,s-o+1).getTime(),n[1]=new Date(l,c,s+(8-o)).getTime()}else if("incomplete"===e){n[0]=new Date(1970,1,1).getTime();var d=new Date;n[1]=d.getTime()}else if("complete"===e){this.isUpdateTime=!0,this.week_switch=!0;var f=new Date,u=f.getDay(),p=f.getDate(),m=f.getMonth(),b=f.getFullYear();n[0]=new Date(b,m,p-u+1).getTime(),n[1]=new Date(b,m,p+(8-u)).getTime()}this.weekRange=new Date(n[0]),this.loading=!0,this.affairGet(le(n),e,this.isUpdateTime).then(function(e){for(var t in r.loading=!1,r.total_data=e,r.show_data=r.total_data,r.show_data){var n=r.show_data[t];if("已完成"!=n.status&&"已终止"!=n.status){var i=((new Date).getTime()-new Date(n.create_date).getTime())/6048e5;(i=Math.ceil(i))>n.period?a.notify({title:"超期提示",type:"error",duration:4500,message:"项目<"+n.prjname+"> 已经超过规划时间，请及时处理"}):i>=n.period&&a.notify({title:"即将超期",type:"warning",duration:2500,message:"项目<"+n.prjname+"> 即将超期，请及时处理"})}}}).catch(function(e){r.loading=!1,console.dir(e)})},affairGet:function(e,t,a){var n=e;return"incomplete"===t?n.iscomplete=!1:"complete"===t&&(n.iscomplete=!0,n.isupdatetime=a),new c.a(function(e,t){d()({url:"/affair",method:"get",timeout:5e3,responseType:"json",responseEncoding:"utf8",params:n}).then(function(t){e(t.data)}).catch(function(e){t(e)})})},dialogClose:function(){this.open_dialog=!1},dialogSubmit:function(e,t){var a=this;t||(e.uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),this.affairPut(e).then(function(n){if(n){if(t){for(var r=0;r<a.show_data.length;r++)if(a.show_data[r].uuid==t){a.show_data[r]=e;break}a.$message.success("修改记录成功!")}else a.show_data.unshift(e),a.$message.success("新增记录成功!");a.tableKey=Math.random()}else a.$message.warning("提交记录失败!");a.open_dialog=!1}).catch(function(e){console.dir(e),a.$message.error("服务器跑路了～")})},creatNewitem:function(){this.editIndex=-1,this.editDefault={create_date:(new Date).getTime(),prjname:"",prjtype:[],brief:"",region:"",period:1,percent:0,status:"执行中",duty_persons:[v("username")]},this.open_dialog=!0},affairEdit:function(e,t){this.editIndex=e,this.editDefault=t,this.open_dialog=!0},affairDelete:function(e,t){var a=this;this.$confirm("此操作将删除此条项目记录,是否执行?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=new Object;e.uuid=t.uuid,d()({url:"/affair",method:"delete",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e}).then(function(e){if("删除成功"==e.data.message){a.$message({type:"success",message:"删除成功!"});for(var n=0;n<a.show_data.length;n++)if(a.show_data[n].uuid==t.uuid){a.show_data.splice(n,1);break}}}).catch(function(e){console.dir(e)})}).catch(function(){})},affairPut:function(e){return new c.a(function(t,a){d()({url:"/affair",method:"put",timeout:5e3,responseType:"json",responseEncoding:"utf8",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e}).then(function(e){"插入成功"==e.data.message?t(!0):t(!1)}).catch(function(e){a(e)})})},exportOptSubmit:function(){this.open_export_dialog=!1},createExportOpt:function(e){var t=new Object;for(var a in this.$refs.data_table.$slots.default)if(this.$refs.data_table.$slots.default[a].componentOptions&&this.$refs.data_table.$slots.default[a].componentOptions.propsData.prop){var n=this.$refs.data_table.$slots.default[a].componentOptions.propsData;switch(t[n.prop]=new Object,t[n.prop].name=n.label,n.prop){case"prjname":t[n.prop].wpx=140,t[n.prop].alignment=new Object,t[n.prop].alignment.wrapText=!0;break;case"brief":t[n.prop].wpx=200,t[n.prop].alignment=new Object,t[n.prop].alignment.wrapText=!0;break;case"prjtype":t[n.prop].wpx=110,t[n.prop].alignment=new Object,t[n.prop].alignment.wrapText=!0;default:t[n.prop].wpx=90}}for(var r in t.temp_content=new Object,t.temp_content.name="具体内容",t.temp_content.dateRange=[new Date,new Date],t.temp_content.wpx=240,t.temp_content.alignment=new Object,t.temp_content.alignment.wrapText=!0,e)e[r].create_date<t.temp_content.dateRange[0].getTime()&&(t.temp_content.dateRange[0]=new Date(e[r].create_date));return t},curpageExport:function(){var e,t=document.querySelector(".el-table__body-wrapper table"),a=U.a.utils.table_to_book(t).Sheets.Sheet1,n=[];for(var r in a)if(-1!=r.search("C"))for(var i in this.show_data)if(-1!=a[r].v.search(this.show_data[i].uuid)){n.push(u()({},this.show_data[i]));break}this.exportAction=(e=j()(A.a.mark(function e(t,a){var r,i,o,s,c,l,d,f,u,p,m,b,h=this;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(f in r=(new Date).toString()+" 当前页面导出.xlsx",i={fill:{fgColor:{rgb:"FFA3F4B1"}},font:{name:"宋体",sz:12,bold:!0},border:{bottom:{style:"thin",color:"FF000000"}}},o=U.a.utils.book_new(),s=null,null==(c=W.a.extname(r))?(r+=".xlsx",s="xlsx"):s=c.substr(1).toLowerCase(),l="当前页面显示导出",d=null,n)for(u in n[f])"create_date"==u?n[f][u]=w(n[f][u]):"period"==u?n[f][u]=fe(n[f].period,n[f].create_date):"status"==u&&(n[f][u]=n[f][u]+"("+n[f].percent+"%)"),"[object Array]"==Object.prototype.toString.call(n[f][u])&&(n[f][u]=n[f][u].toString());p=A.a.mark(function e(r){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.methods.getLineContent(n[r].uuid,a).then(function(e){for(var a in t)if(t[a].dateRange){var i=Q.methods.line2Text(e,t[a].dateRange);i&&(n[r][t[a].name]=i)}}).catch(function(e){console.dir(n[r].uuid+":"+e)});case 2:case"end":return e.stop()}},e,h)}),e.t0=A.a.keys(n);case 11:if((e.t1=e.t0()).done){e.next=16;break}return m=e.t1.value,e.delegateYield(p(m),"t2",14);case 14:e.next=11;break;case 16:o.SheetNames.push(l),o.Sheets[l]=se(n,t,s,i,d),b=V.a.write(o,{bookType:s,bookSST:!1,type:"binary"}),Object(L.saveAs)(new Blob([ce(b)],{type:""}),r);case 20:case"end":return e.stop()}},e,this)})),function(t,a){return e.apply(this,arguments)}),this.exportOption=this.createExportOpt(n),this.exportLabel="当前页面展示内容导出",this.open_export_dialog=!0},easyExport:function(){var e=this;return j()(A.a.mark(function t(){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e,e.exportAction=function(){var e=j()(A.a.mark(function e(t,n){var r,i,o,s,c,l,d,f,u,p=this;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="第"+function(){var e=new Date,t=new Date;t.setMonth(0),t.setDate(1);var a=e.getTime()-t.getTime();return Math.ceil(a/6048e5)}()+"周周报.xlsx",i=["create","complete","incomplete"],o={fill:{fgColor:{rgb:"FFA3F4B1"}},font:{name:"宋体",sz:12,bold:!0},border:{bottom:{style:"thin",color:"FF000000"}}},s=U.a.utils.book_new(),c=null,null==(l=W.a.extname(r))?(r+=".xlsx",c="xlsx"):c=l.substr(1).toLowerCase(),d=A.a.mark(function e(r){var l,d,f,u,m,b,h,g,v;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=new Array(2),d=!1,f="本周新增",u=null,m=new Date,b=m.getDay(),h=m.getDate(),g=m.getMonth(),v=m.getFullYear(),l[0]=new Date(v,g,h-b+1).getTime(),l[1]=new Date(v,g,h+(8-b)).getTime(),"create"===i[r]?(f="本周新增",u=null):"incomplete"===i[r]?(l[0]=new Date(1970,1,1).getTime(),l[1]=(new Date).getTime(),u=null,f="未完成"):"complete"===i[r]&&(u=null,f="已完成",d=!0),e.next=14,a.affairGet(le(l),i[r],d).then(function(){var e=j()(A.a.mark(function e(l){var d,p,m,_,w,y=this;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("create"!=i[r])for(d=l.length-1;d>=0;d--)l[d].create_date>new Date(v,g,h-b+1).getTime()&&l.splice(d,1);for(p in l)for(m in l[p])"create_date"==m?l[p][m]=a.date2str(l[p][m]):"period"==m?l[p][m]=a.getSchemeStr(null,l[p]):"status"==m&&(l[p][m]=l[p][m]+"("+l[p].percent+"%)"),"[object Array]"==Object.prototype.toString.call(l[p][m])&&(l[p][m]=l[p][m].toString());_=A.a.mark(function e(a){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.methods.getLineContent(l[a].uuid,n).then(function(e){for(var n in t)if(t[n].dateRange){var r=Q.methods.line2Text(e,t[n].dateRange);r&&(l[a][t[n].name]=r)}}).catch(function(e){console.dir(l[a].uuid+":"+e)});case 2:case"end":return e.stop()}},e,y)}),e.t0=A.a.keys(l);case 4:if((e.t1=e.t0()).done){e.next=9;break}return w=e.t1.value,e.delegateYield(_(w),"t2",7);case 7:e.next=4;break;case 9:s.SheetNames.push(f),s.Sheets[f]=se(l,t,c,o,u);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.dir(e)});case 14:case"end":return e.stop()}},e,p)}),e.t0=A.a.keys(i);case 10:if((e.t1=e.t0()).done){e.next=15;break}return f=e.t1.value,e.delegateYield(d(f),"t2",13);case 13:e.next=10;break;case 15:u=V.a.write(s,{bookType:c,bookSST:!1,type:"binary"}),Object(L.saveAs)(new Blob([ce(u)],{type:""}),r);case 17:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),e.exportOption=e.createExportOpt(null),e.exportLabel="完整周报导出",e.open_export_dialog=!0;case 5:case"end":return t.stop()}},t,e)}))()}},created:function(){},mounted:function(){this.selectItemWithStatus(this.table_status,void 0)},updated:function(){},destroyed:function(){}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"87vh"}},[a("el-header",{attrs:{height:"60px"}},[a("el-col",{staticStyle:{"align-items":"left"},attrs:{span:6}},[a("el-menu",{attrs:{"default-active":e.table_status,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.selectItemWithStatus},model:{value:e.table_status,callback:function(t){e.table_status=t},expression:"table_status"}},[a("el-menu-item",{attrs:{index:"create"}},[e._v("本周新增")]),e._v(" "),a("el-menu-item",{attrs:{index:"incomplete"}},[e._v("未完成")]),e._v(" "),a("el-menu-item",{attrs:{index:"complete"}},[e._v("历史已完成")])],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"create"==e.table_status,expression:"table_status=='create'"}],staticClass:"timerange",attrs:{span:10}},[a("el-date-picker",{attrs:{type:"week",disabled:"","value-format":"timestamp",format:"yyyy 第 WW 周",placeholder:"选择周"},model:{value:e.weekRange,callback:function(t){e.weekRange=t},expression:"weekRange"}})],1),e._v(" "),"incomplete"==e.table_status?a("el-col",{staticClass:"timerange",attrs:{span:10}}):e._e(),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"complete"==e.table_status,expression:"table_status=='complete'"}],staticClass:"timerange",attrs:{span:10}},[a("el-switch",{staticStyle:{display:"block",padding:"20px"},attrs:{"active-text":"最后更新时间","inactive-text":"创建时间"},on:{change:function(t){return e.rangeTypeChange()}},model:{value:e.week_switch,callback:function(t){e.week_switch=t},expression:"week_switch"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.isUpdateTime,expression:"isUpdateTime"}],attrs:{type:"week",format:"自yyyy 第 WW 周",placeholder:"选择周"},on:{change:function(t){return e.timeRangeChange()}},model:{value:e.weekRange,callback:function(t){e.weekRange=t},expression:"weekRange"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.isUpdateTime,expression:"!isUpdateTime"}],attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.timeRangeChange()}},model:{value:e.weekRange,callback:function(t){e.weekRange=t},expression:"weekRange"}})],1),e._v(" "),a("el-col",{staticClass:"timerange",attrs:{span:7}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"create"==e.table_status,expression:"table_status=='create'"}],attrs:{size:"mini",type:"success"},on:{click:function(t){return e.easyExport()}}},[e._v("一键导出")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"create"==e.table_status,expression:"table_status=='create'"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.creatNewitem()}}},[e._v("新建项目记录")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.curpageExport()}}},[e._v("导出当前显示项目")])],1),e._v(" "),a("el-col",{attrs:{span:1}})],1),e._v(" "),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.tableKey,ref:"data_table",staticStyle:{width:"100%"},attrs:{data:e.show_data,height:"100%","cell-style":e.cellStyle,"header-cell-style":e.headercellStyle,"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("self-timeline",{attrs:{isEditable:"complete"!=e.table_status,project_uuid:t.row.uuid,project_status:e.getSchemeType(t.$index,t.row),project_index:t.row.uuid},on:{"timeline-submit":e.timelineSubmit}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"1%",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_date","min-width":"6%",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"none"}},[e._v(e._s(t.row.uuid))]),e._v("\n                "+e._s(e.date2str(new Date(t.row.create_date)))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"region","min-width":"5%",filters:e.regionOpt,"filter-method":e.tableFilter,label:"区域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prjmodel","min-width":"5%",filters:e.modelOpt,"filter-method":e.tableFilter,label:"产品型号"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.prjmodel,function(t){return a("el-tag",{key:t,staticStyle:{margin:"1px"},attrs:{"disable-transitions":"",type:"info",size:"small"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"prjname","min-width":"10%",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"7%",prop:"prjtype",filters:e.typeOpt,"filter-method":e.tableFilter,label:"项目类型"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.prjtype,function(t){return a("el-tag",{key:t,staticStyle:{margin:"1px"},attrs:{"disable-transitions":"",type:"danger",size:"small"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"brief","min-width":"17%",label:"原始需求/反馈"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.brief))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"svnurl","min-width":"10%",label:"svn/git地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"period","min-width":"8%",label:"已执行/预计时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-alert",{staticStyle:{padding:"2px 8px"},attrs:{description:e.getSchemeStr(t.$index,t.row),closable:!1,center:"",type:e.getSchemeType(t.$index,t.row)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"8%",prop:"status",filters:e.statusOpt,"filter-method":e.tableFilter,label:"执行状态"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("self-processline",{attrs:{percent:e.row.percent,status:e.row.status}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"8%",prop:"duty_persons",filters:e.personOpt,"filter-method":e.tableFilter,label:"当前处理人员"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.duty_persons,function(t){return a("el-tag",{key:t,staticStyle:{margin:"1px"},attrs:{"disable-transitions":"",type:"success",size:"small"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"6%",prop:"relate_persons",filters:e.relationOpt,"filter-method":e.tableFilter,label:"关联人员"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.relate_persons,function(t){return a("el-tag",{key:t,staticStyle:{margin:"1px"},attrs:{"disable-transitions":"",size:"small"}},[e._v("\n                        "+e._s(t)+"\n                    ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"10%",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("el-input",{staticStyle:{width:"140px","margin-left":"10px"},attrs:{size:"mini","filter-method":e.tableFilter,placeholder:"输入搜索关键字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterWithKeyWords(e.search)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:"complete"==e.table_status},on:{click:function(a){return e.affairEdit(t.$index,t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",disabled:"create"!=e.table_status},on:{click:function(a){return e.affairDelete(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1),e._v(" "),e.open_dialog?a("item-edit",{attrs:{editIndex:e.editIndex,value:e.editDefault},on:{"dialog-close":e.dialogClose,"dialog-submit":e.dialogSubmit}}):e._e(),e._v(" "),e.open_export_dialog?a("export-option",{attrs:{headLable:e.exportLabel,exportAction:e.exportAction,exportOption:e.exportOption},on:{"dialog-close":e.exportOptSubmit,"dialog-submit":e.exportOptSubmit}}):e._e()],1),e._v(" "),a("el-footer",{attrs:{height:"40px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":2,total:e.show_data.length}})],1)],1)},staticRenderFns:[]};var be=a("VU/8")(pe,me,!1,function(e){a("AvQP")},"data-v-c2c0fa9e",null).exports,he={name:"ctrlPage",data:function(){return{tableKey:Math.random(),user_tab_active:"userManager",user_proper_options:["controller","normalizer"],user_table:[]}},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.user_passwd?"":"nopasswd-row"},userEdit:function(e){e.is_edit=!0,this.tableKey=Math.random()},userCancel:function(e,t){t.is_edit=!1,e==this.user_table.length-1&&(t.user_name="",t.user_prop=""),this.tableKey=Math.random()},userConfirm:function(e,t){var a=this,n={username:t.user_name,passwd:"",prop:t.user_prop};this.userPut(n).then(function(n){if(e==a.user_table.length-1){var r=new Object({user_name:"",user_prop:"",is_edit:!1});a.user_table.splice(e+1,0,r),a.$message({type:"success",message:"添加用户成功!"})}else a.$message({type:"success",message:"修改用户属性成功!"});t.is_edit=!1,a.tableKey=Math.random()}).catch(function(e){console.dir(e),a.$message({type:"error",message:e})})},userGet:function(){var e=this;d()({url:"/user",method:"get",timeout:5e3,responseType:"json",responseEncoding:"utf8"}).then(function(t){var a=new Object({user_name:"",user_prop:"",is_edit:!1});e.user_table=t.data,e.user_table.splice(e.user_table.length,0,a)}).catch(function(e){console.dir(e)})},userPut:function(e){return new c.a(function(t,a){d()({url:"/user",method:"put",timeout:5e3,responseType:"json",responseEncoding:"utf8",data:e}).then(function(e){t(e.data)}).catch(function(e){a(e)})})},userDelete:function(e,t){var a=this;d()({url:"/user",method:"delete",timeout:5e3,responseType:"json",responseEncoding:"utf8",data:{username:t.user_name}}).then(function(t){t.data.message&&(a.$message({type:"success",message:"删除用户成功!"}),a.user_table.splice(e,1))}).catch(function(e){console.dir(e),a.$message({type:"error",message:e})})}},mounted:function(){this.userGet()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-menu",{staticStyle:{width:"10vw"},attrs:{"default-active":"user_manager","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"user_manager"}},[a("i",{staticClass:"el-icon-user"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户管理")])])],1),e._v(" "),a("el-main",[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.user_tab_active,callback:function(t){e.user_tab_active=t},expression:"user_tab_active"}},[a("el-tab-pane",{attrs:{label:"账户管理",name:"userManager"}},[a("el-table",{key:e.tableKey,staticStyle:{width:"50%"},attrs:{data:e.user_table,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"user_name",label:"用户名称","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_edit&&t.$index==e.user_table.length-1?a("el-input",{attrs:{size:"mini",placeholder:"输入用户名"},model:{value:t.row.user_name,callback:function(a){e.$set(t.row,"user_name",a)},expression:"scope.row.user_name"}}):a("div",[e._v(" "+e._s(t.row.user_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"user_prop",label:"用户属性","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_edit?a("el-select",{attrs:{placeholder:"请选择用户属性"},model:{value:t.row.user_prop,callback:function(a){e.$set(t.row,"user_prop",a)},expression:"scope.row.user_prop"}},e._l(e.user_proper_options,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1):a("div",[e._v(" "+e._s(t.row.user_prop))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"40%",label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_edit||t.$index!=e.user_table.length-1?t.row.is_edit?a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-check"},on:{click:function(a){return e.userConfirm(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-close"},on:{click:function(a){return e.userCancel(t.$index,t.row)}}})],1):a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return e.userEdit(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.userDelete(t.$index,t.row)}}},[e._v("Delete")])],1):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.userEdit(t.row)}}},[e._v("新增用户")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"统计信息",name:"forInfo"}},[e._v("信息显示")]),e._v(" "),a("el-tab-pane",{attrs:{label:"修改密码",name:"changePasswd"}},[e._v("修改密码")])],1)],1)],1)},staticRenderFns:[]};var ve=a("VU/8")(he,ge,!1,function(e){a("QlbZ")},"data-v-272dc19a",null).exports;n.default.use(o.a);var _e=new o.a({routes:[{path:"/",component:k},{name:"mainPage",path:"/mainPage",component:T,props:function(e){return e.params},children:[{path:"shortItem",component:be},{path:"contrlBroad",component:ve}]}]}),we=a("zL8q"),ye=a.n(we);a("tvR6");n.default.use(ye.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:_e,components:{App:i},template:"<App/>"})},QDfD:function(e,t){e.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},QlbZ:function(e,t){},Vngv:function(e,t){},e6XX:function(e,t){e.exports=cptable},ejIc:function(e,t){e.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},fPRk:function(e,t){},nTnq:function(e,t){},tvR6:function(e,t){},whA0:function(e,t){},zQKd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.efd08d74375dc94f1113.js.map